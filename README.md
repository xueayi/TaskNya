<div align="center">

# ğŸˆ TaskNya - å®æ—¶ä»»åŠ¡ç›‘æ§ç³»ç»Ÿ

[é¡¹ç›®ä¸»é¡µ](https://github.com/xueayi/TaskNya) | [ç”¨æˆ·æŒ‡å—](docs/user_guide.md) | [å¼€å‘æ‰‹å†Œ](docs/DEVELOPMENT.md) | [API å¼•ç”¨](docs/api_reference.md)

![Python](https://img.shields.io/badge/Python-3.12%2B-3776AB?style=flat-square&logo=python&logoColor=white) 
![Flask](https://img.shields.io/badge/Flask-3.0%2B-000000?style=flat-square&logo=flask&logoColor=white)
![WebSocket](https://img.shields.io/badge/WebSocket-Enabled-F5DE19?style=flat-square)
![License](https://img.shields.io/badge/License-MIT-green.svg?style=flat-square) 
![Status](https://img.shields.io/badge/Status-Active-brightgreen.svg?style=flat-square)

</div>

**TaskNya** æ˜¯ä¸€ä¸ªé€šç”¨çš„ä»»åŠ¡ç›‘æ§ä¸é€šçŸ¥å·¥å…·ï¼Œé€‚ç”¨äº **æ·±åº¦å­¦ä¹ è®­ç»ƒã€æœåŠ¡å™¨ä»»åŠ¡ã€æ‰¹å¤„ç†è„šæœ¬ã€æ—¥å¿—ç›‘æ§ã€èµ„æºç®¡ç†ç­‰**ã€‚  
å®ƒèƒ½å¤Ÿ **æ£€æµ‹ä»»åŠ¡å®ŒæˆçŠ¶æ€**ï¼ˆåŸºäºæ–‡ä»¶ã€æ—¥å¿—ã€GPU èµ„æºï¼‰ï¼Œå¹¶é€šè¿‡ **Webhook** å‘é€é€šçŸ¥åˆ° **ä»»æ„æ”¯æŒ Webhook çš„å¹³å°**ï¼ˆå¦‚ é£ä¹¦ã€Astrbot ç­‰ï¼‰ã€‚  

![Webç•Œé¢](images/webui.png)
[é£ä¹¦æ¨é€æ•ˆæœé¢„è§ˆ](images/é£ä¹¦æ¨é€.jpg)

---

## ç›®å½•

- [ä¸»è¦åŠŸèƒ½](#ä¸»è¦åŠŸèƒ½)
- [å®‰è£…å’Œä½¿ç”¨](#å®‰è£…å’Œä½¿ç”¨)
  - [Windows è¿è¡Œ](#windowsä¸­çš„ä½¿ç”¨æ–¹å¼)
  - [å‘½ä»¤è¡Œè¿è¡Œ](#å‘½ä»¤è¡Œæ–¹å¼)
  - [Linux åå°è¿è¡Œ](#linux-åå°è¿è¡Œ)
  - [Docker éƒ¨ç½²](#dockeræ–¹å¼)
- [é…ç½®æ–‡ä»¶è¯´æ˜](#é…ç½®æ–‡ä»¶è¯´æ˜)
- [ç›®å½•ç»“æ„](#ç›®å½•ç»“æ„)
- [å¸¸è§é—®é¢˜](#æ³¨æ„äº‹é¡¹)

---

## ä¸»è¦åŠŸèƒ½  

- [x] **æ–‡ä»¶æ£€æµ‹**ï¼šå½“æŒ‡å®šæ–‡ä»¶ç”Ÿæˆåï¼Œè§¦å‘é€šçŸ¥ï¼ˆé€‚ç”¨äºæ¨¡å‹è®­ç»ƒå®Œæˆã€è®¡ç®—ç»“æŸç­‰ï¼‰ã€‚  
- [x] **æ—¥å¿—æ£€æµ‹**ï¼šå½“æ—¥å¿—ä¸­å‡ºç°æŒ‡å®šå…³é”®å­—æ—¶ï¼Œè§¦å‘é€šçŸ¥ï¼ˆæ”¯æŒå…¨é‡å’Œå¢é‡æ£€æµ‹ï¼‰ã€‚  
- [x] **GPU èµ„æºæ£€æµ‹**ï¼šå½“ GPU åŠŸè€—æŒç»­ä½äºé˜ˆå€¼æ—¶ï¼Œè§¦å‘é€šçŸ¥ï¼ˆæ™ºèƒ½åˆ¤æ–­è®­ç»ƒç»“æŸï¼‰ã€‚  
- [x] **å¤šæ–‡ä»¶æ„ŸçŸ¥ (ç›®å½•ç›‘æ§)**ï¼šå®æ—¶ç›‘æ§æ•´ä¸ªç›®å½•çš„æ–‡ä»¶å˜åŠ¨ï¼ˆæ–°å¢ã€åˆ é™¤ã€ä¿®æ”¹ï¼‰ï¼Œæ”¯æŒäºŒæ¬¡ç¡®è®¤é€»è¾‘ä»¥ç¡®ä¿æ–‡ä»¶å†™å…¥å®Œæ•´ï¼Œå¹¶å¯æ ¹æ®æ–‡ä»¶åæä¾›æ™ºèƒ½æ“ä½œå»ºè®®ã€‚
- [x] **Webhook é€šçŸ¥**ï¼šæ”¯æŒ **é£ä¹¦ã€Astrbot** ç­‰å¹³å°ï¼Œæ”¯æŒè‡ªå®šä¹‰å¡ç‰‡æ ·å¼ã€‚  
- [x] **äºŒæ¬¡å…ƒè¯­å½•**ï¼šé€šçŸ¥å†…å®¹å¯é€‰é™„å¸¦éšæœºç”Ÿæˆçš„äºŒæ¬¡å…ƒè¯­å½•ï¼Œä¸ºæ¯ç‡¥çš„ç§‘ç ”/å¼€å‘ç”Ÿæ´»å¢æ·»ä¸€ä»½è¶£å‘³ã€‚
- [x] **Web ç®¡ç†åå°**ï¼šæä¾›å®æ—¶é…ç½®ã€æ—¥å¿—æŸ¥çœ‹ã€ä»»åŠ¡æ§åˆ¶ç­‰å›¾å½¢åŒ–æ“ä½œã€‚
- [X] **Docker æ”¯æŒ**ï¼šæä¾›å®˜æ–¹ Dockerfile ä¸ Compose é…ç½®ï¼Œæ”¯æŒä¸€é”®éƒ¨ç½²ã€‚
- [X] **è·¨å¹³å°é€‚é…**ï¼šå®Œç¾æ”¯æŒ Windows ä¸ Linux ç¯å¢ƒã€‚
- [ ] é‚®ç®±/ä¼ä¸šå¾®ä¿¡æ¨é€æ·±åº¦é›†æˆä¸­
- [ ] æ›´å¤šè§¦å‘æ¡ä»¶é¢„è®¾ (CPU/å†…å­˜/ç£ç›˜)

---

## å®‰è£…å’Œä½¿ç”¨

### Windowsä¸­çš„ä½¿ç”¨æ–¹å¼

- åœ¨[å‘å¸ƒé¡µ](https://github.com/xueayi/TaskNya/releases)ä¸‹è½½æœ€æ–°ç¨‹åº
- å®‰è£… python3.8 ä»¥ä¸Šè¿è¡Œç¯å¢ƒ
- åŒå‡»`install_requirements.bat`ç¨‹åºå®‰è£…ä¾èµ–
- åŒå‡»`start_webui.bat`å¯åŠ¨ç¨‹åº
- åœ¨æµè§ˆå™¨ä¸­è®¿é—® `http://localhost:5000` å³å¯æ‰“å¼€Webç•Œé¢ã€‚

### å‘½ä»¤è¡Œæ–¹å¼  

#### å…‹éš†é¡¹ç›®
```bash
git clone https://github.com/xueayi/TaskNya.git  
cd TaskNya  
```

#### å®‰è£…ä¾èµ–

åœ¨å‘½ä»¤è¡Œä¸­æ‰§è¡Œ
```bash
# å®‰è£…åŸºæœ¬ä¾èµ–
pip install -r requirements.txt

# å¦‚æœéœ€è¦GPUç›‘æ§åŠŸèƒ½ï¼ˆä»…é€‚ç”¨äºæœ‰NVIDIAæ˜¾å¡çš„ç¯å¢ƒï¼‰
pip install nvidia-ml-py3==7.352.0
```

> **ç¯å¢ƒè¦æ±‚ï¼š**
> - Python 3.8 åŠä»¥ä¸Š
> - GPUç›‘æ§åŠŸèƒ½éœ€è¦NVIDIAæ˜¾å¡å’Œnvidia-smiå·¥å…·ï¼ˆå¯é€‰ï¼‰

#### å‘½ä»¤è¡Œæ–¹å¼

```bash
# ä½¿ç”¨é»˜è®¤é…ç½®è¿è¡Œ
python main.py

# ä½¿ç”¨è‡ªå®šä¹‰é…ç½®æ–‡ä»¶è¿è¡Œ
python main.py --config config.yaml
```

#### Webç•Œé¢æ–¹å¼ï¼ˆæ¨èï¼‰

```bash
# å¯åŠ¨Webç•Œé¢
python webui.py
```

Webç•Œé¢åŠŸèƒ½ï¼š
- ğŸ“ å®æ—¶é…ç½®ä¿®æ”¹
- ğŸ”„ ä¿å­˜/åŠ è½½å¤šä¸ªé…ç½®æ–¹æ¡ˆ
- ğŸ“Š å®æ—¶ç›‘æ§çŠ¶æ€å’Œæ—¥å¿—æ˜¾ç¤º
- ğŸ›ï¸ ç›´è§‚çš„æ§åˆ¶é¢æ¿

è®¿é—® `http://localhost:5000` å³å¯æ‰“å¼€Webç•Œé¢ã€‚

> **ç«¯å£å†²çªè§£å†³æ–¹æ¡ˆï¼š**
> 1. å¦‚æœ5000ç«¯å£è¢«å ç”¨ï¼Œå¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼ä¿®æ”¹ç«¯å£ï¼š
>    ```bash
>    # Linux/Mac
>    export FLASK_RUN_PORT=5001
>    python webui.py
>    
>    # Windows (PowerShell)
>    $env:FLASK_RUN_PORT=5001
>    python webui.py
>    
>    # Windows (CMD)
>    set FLASK_RUN_PORT=5001
>    python webui.py
>    ```
> 2. æˆ–è€…ç›´æ¥ä¿®æ”¹ `webui.py` ä¸­çš„ç«¯å£é…ç½®ï¼š
>    ```python
>    if __name__ == '__main__':
>        app.run(host='0.0.0.0', port=5001)
>    ```
> 3. å¸¸è§ç«¯å£å†²çªåŸå› ï¼š
>    - Windowsç³»ç»Ÿçš„IISæœåŠ¡
>    - å…¶ä»–Webåº”ç”¨
>    - Dockerå®¹å™¨
>    - å¼€å‘æœåŠ¡å™¨

#### Linux åå°æŒä¹…åŒ–è¿è¡Œ

åœ¨ Linux æœåŠ¡å™¨ä¸Šï¼Œå¦‚æœå¸Œæœ›å…³é—­ç»ˆç«¯åç¨‹åºä¾ç„¶è¿è¡Œï¼Œå¯ä»¥ä½¿ç”¨é…å¥—çš„ `manage_webui.sh` è„šæœ¬è¿›è¡Œç®¡ç†ï¼š

```bash
# èµ‹äºˆæ‰§è¡Œæƒé™
chmod +x manage_webui.sh

# å¯åŠ¨æœåŠ¡ (åå°)
./manage_webui.sh start

# åœæ­¢æœåŠ¡
./manage_webui.sh stop

# é‡å¯æœåŠ¡
./manage_webui.sh restart

# æŸ¥çœ‹çŠ¶æ€å’Œæ—¥å¿—
./manage_webui.sh status
```

å¯åŠ¨åï¼Œæ—¥å¿—å°†å®æ—¶å†™å…¥é¡¹ç›®æ ¹ç›®å½•ä¸‹çš„ `output.log` æ–‡ä»¶ã€‚

### Dockeræ–¹å¼

#### ç›´æ¥ä½¿ç”¨ Docker é•œåƒ

1. **æ‹‰å–é•œåƒ**
```bash
docker pull xueayis/tasknya:latest
```

2. **è¿è¡Œå®¹å™¨**
åœ¨å‘½ä»¤è¡Œè¾“å…¥ä»¥ä¸‹å†…å®¹ç›´æ¥è¿è¡Œå®¹å™¨ï¼Œå…¶ä¸­`-v`å‚æ•°å·¦ä¾§æ˜¯è¦æ£€æµ‹çš„ç›®æ ‡è·¯å¾„ï¼Œéœ€è¦ç¡®ä¿ç›®æ ‡æ–‡ä»¶å¤¹å­˜åœ¨
```bash
docker run -d \
  --name tasknya \
  -p 5000:5000 \
  -v $(pwd)/logs:/app/logs \
  -v $(pwd)/monitor_targets:/app/monitor_targets \
  -e FLASK_APP=webui.py \
  -e FLASK_RUN_PORT=5000 \
  -e PYTHONUNBUFFERED=1 \
  --restart unless-stopped \
  xueayis/tasknya:latest
```

#### æˆ–è€…ä½¿ç”¨ Docker Compose

3. **åˆ›å»ºcomposeæ–‡ä»¶**

åœ¨è¦éƒ¨ç½²çš„ç›®å½•ä¸‹åˆ›å»ºdocker-compose.ymlï¼Œåˆ›å»ºæ–‡ä»¶å¤¹logså’Œmonitor_targetsï¼Œå¹¶å¡«å…¥ä»¥ä¸‹å†…å®¹
```docker-compose.yml
version: '3'
services:
  tasknya:
    image: xueayis/tasknya:latest
    container_name: tasknya
    ports:
      - "5000:5000"
    volumes:
      # é…ç½®æ–‡ä»¶æ˜ å°„ï¼Œæ­¤æ–‡ä»¶å¤¹å†…å¿…é¡»æœ‰default.yamlæ–‡ä»¶
      #- ./configs:/app/configs
      # æ—¥å¿—æ–‡ä»¶æ˜ å°„
      - ./logs:/app/logs
      # ç›‘æ§ç›®æ ‡æ–‡ä»¶æ˜ å°„
      - ./monitor_targets:/app/monitor_targets
      # å¯é€‰ï¼šé¢å¤–çš„ç›‘æ§ç›®æ ‡ç›®å½•æ˜ å°„ï¼ˆæ ¹æ®å®é™…éœ€æ±‚ä¿®æ”¹ï¼‰
      # - /path/to/your/training/files:/app/monitor/training
      # - /path/to/your/log/files:/app/monitor/logs
    environment:
      - FLASK_APP=webui.py
      - FLASK_RUN_PORT=5000
      - PYTHONUNBUFFERED=1
    restart: unless-stopped 
```

4. **å¯åŠ¨æœåŠ¡**
```bash
docker-compose up -d
```

5. **æŸ¥çœ‹æ—¥å¿—**
```bash
docker-compose logs -f
```

6. **åœæ­¢æœåŠ¡**
```bash
docker-compose down
```

#### æ–‡ä»¶æ˜ å°„è¯´æ˜

ä¸ºäº†ä½¿ TaskNya èƒ½å¤Ÿæ­£å¸¸ç›‘æ§æ–‡ä»¶å’Œæ—¥å¿—ï¼Œéœ€è¦æ­£ç¡®è®¾ç½®æ–‡ä»¶æ˜ å°„ï¼š

1. **åŸºç¡€ç›®å½•æ˜ å°„**
   - `./configs:/app/configs`: é…ç½®æ–‡ä»¶ç›®å½•ï¼Œå­˜æ”¾é…ç½®æ–‡ä»¶
   - `./logs:/app/logs`: æ—¥å¿—æ–‡ä»¶ç›®å½•ï¼Œå­˜æ”¾åº”ç”¨æ—¥å¿—
   - `./monitor_targets:/app/monitor_targets`: é»˜è®¤ç›‘æ§ç›®æ ‡ç›®å½•ï¼Œç”¨äºå­˜æ”¾éœ€è¦ç›‘æ§çš„æ–‡ä»¶

2. **é¢å¤–ç›‘æ§ç›®æ ‡æ˜ å°„**
   å¦‚æœè¦ç›‘æ§å…¶ä»–ä½ç½®çš„æ–‡ä»¶æˆ–æ—¥å¿—ï¼Œéœ€è¦æ·»åŠ ç›¸åº”çš„æ˜ å°„ã€‚ä¾‹å¦‚ï¼š
   ```yaml
   volumes:
     # ç›‘æ§æ·±åº¦å­¦ä¹ è®­ç»ƒè¾“å‡º
     - /path/to/training/output:/app/monitor/training
     # ç›‘æ§æ—¥å¿—æ–‡ä»¶
     - /path/to/log/files:/app/monitor/logs
   ```

3. **é…ç½®æ–‡ä»¶ä¿®æ”¹**
   åœ¨ `configs/default.yaml` ä¸­ï¼Œç¡®ä¿æ–‡ä»¶è·¯å¾„ä½¿ç”¨å®¹å™¨å†…çš„è·¯å¾„ï¼š
   ```yaml
   monitor:
     # ç›‘æ§é»˜è®¤ç›®å½•ä¸­çš„æ–‡ä»¶
     check_file_path: "/app/monitor_targets/model_final.pth"
     # æˆ–ç›‘æ§æ˜ å°„çš„å…¶ä»–ç›®å½•
     check_file_path: "/app/monitor/training/model_final.pth"
     check_log_path: "/app/monitor/logs/training.log"
   ```
   å¦‚æœæ˜ å°„è¯¥æ–‡ä»¶å¤¹ï¼Œå¿…é¡»ç¡®ä¿æ–‡ä»¶å¤¹å†…å«æœ‰default.yamlé…ç½®ï¼Œå¦åˆ™ç¨‹åºä¼šæŠ¥é”™

#### dockerä½¿ç”¨æ³¨æ„äº‹é¡¹

1. **è·¯å¾„æ˜ å°„**
   - ä½¿ç”¨ç»å¯¹è·¯å¾„è¿›è¡Œæ˜ å°„
   - ç¡®ä¿ç›®å½•å­˜åœ¨ä¸”æœ‰æ­£ç¡®çš„æƒé™
   - å®¹å™¨å†…è·¯å¾„å¿…é¡»ä¸é…ç½®æ–‡ä»¶ä¸­çš„è·¯å¾„ä¸€è‡´

2. **GPUæ”¯æŒ**
   å¦‚æœéœ€è¦ä½¿ç”¨GPUç›‘æ§åŠŸèƒ½ï¼Œéœ€è¦å®‰è£…nvidia-dockerå¹¶æ·»åŠ è¿è¡Œæ—¶å‚æ•°ï¼š
   ```bash
   # ä½¿ç”¨ Docker å‘½ä»¤
   docker run --gpus all ...

   # æˆ–åœ¨ docker-compose.yml ä¸­æ·»åŠ 
   deploy:
     resources:
       reservations:
         devices:
           - driver: nvidia
             count: all
             capabilities: [gpu]
   ```

3. **æ—¥å¿—æŸ¥çœ‹**
   ```bash
   # æŸ¥çœ‹å®¹å™¨æ—¥å¿—
   docker logs -f tasknya

   # æŸ¥çœ‹åº”ç”¨æ—¥å¿—
   docker exec tasknya cat /app/logs/monitor.log
   ```

4. **è¿è¡Œå¼‚å¸¸å¤„ç†**
```bash
sudo groupadd docker  # ç¡®ä¿ docker ç»„å­˜åœ¨
sudo usermod -aG docker $USER  # æŠŠå½“å‰ç”¨æˆ·åŠ å…¥ docker ç»„
newgrp docker  # ç«‹å³åº”ç”¨ç»„æƒé™ï¼Œæˆ–è€…é‡æ–°ç™»å½•ç³»ç»Ÿ
```

---


### é…ç½®æ–‡ä»¶è¯´æ˜

é…ç½®æ–‡ä»¶ä½¿ç”¨YAMLæ ¼å¼ï¼Œåˆ†ä¸º `monitor` å’Œ `webhook` ä¸¤ä¸ªä¸»è¦éƒ¨åˆ†ã€‚æ¯ä¸ªé…ç½®é¡¹éƒ½æœ‰è¯¦ç»†çš„è¯´æ˜å’Œé»˜è®¤å€¼ã€‚

1. **åŸºç¡€é…ç½®**
```yaml
monitor:
  # é¡¹ç›®åŸºæœ¬ä¿¡æ¯
  project_name: "æ·±åº¦å­¦ä¹ è®­ç»ƒ"     # é¡¹ç›®åç§°ï¼Œå°†æ˜¾ç¤ºåœ¨é€šçŸ¥æ¶ˆæ¯ä¸­
  check_interval: 5              # æ£€æŸ¥é—´éš”(ç§’)ï¼Œæ¯éš”å¤šå°‘ç§’æ£€æŸ¥ä¸€æ¬¡ä»»åŠ¡çŠ¶æ€
  logprint: 60                  # æ—¥å¿—æ‰“å°é—´éš”ï¼ˆç§’ï¼‰ï¼Œæ¯éš”å¤šå°‘ç§’åœ¨æ—¥å¿—ä¸­æ‰“å°ä¸€æ¬¡çŠ¶æ€
  timeout: None                 # ç›‘æ§è¶…æ—¶æ—¶é—´(ç§’)ï¼Œè®¾ä¸ºNoneåˆ™æ— é™ç­‰å¾…ï¼Œåˆ°æœŸåè‡ªåŠ¨åœæ­¢ç›‘æ§
```

2. **æ–‡ä»¶ç›‘æ§é…ç½®**
```yaml
monitor:
  # å•æ–‡ä»¶æ„ŸçŸ¥é…ç½®
  check_file_enabled: true                        # æ˜¯å¦å¯ç”¨å•æ–‡ä»¶æ„ŸçŸ¥
  check_file_path: "./output/model_final.pth"     # è¦æ£€æŸ¥çš„æ–‡ä»¶è·¯å¾„ï¼Œæ”¯æŒç›¸å¯¹è·¯å¾„å’Œç»å¯¹è·¯å¾„
                                                 # å½“æ­¤æ–‡ä»¶å‡ºç°æ—¶ï¼Œè§†ä¸ºä»»åŠ¡å®Œæˆ
```

3. **æ—¥å¿—ç›‘æ§é…ç½®**
```yaml
monitor:
  # æ—¥å¿—æ£€æŸ¥é…ç½®
  check_log_enabled: true                         # æ˜¯å¦å¯ç”¨æ—¥å¿—æ£€æŸ¥
  check_log_path: "./logs/training.log"           # æ—¥å¿—æ–‡ä»¶è·¯å¾„ï¼Œæ”¯æŒç›¸å¯¹è·¯å¾„å’Œç»å¯¹è·¯å¾„
  check_log_markers:                             # å®Œæˆæ ‡è®°åˆ—è¡¨ï¼Œå½“æ—¥å¿—ä¸­å‡ºç°ä»¥ä¸‹ä»»ä¸€å…³é”®è¯æ—¶ï¼Œè§†ä¸ºä»»åŠ¡å®Œæˆ
    - "Training completed"                        # è‹±æ–‡å®Œæˆæ ‡è®°
    - "ä»»åŠ¡å®Œæˆ"                                   # ä¸­æ–‡å®Œæˆæ ‡è®°
    - "è®­ç»ƒå®Œæˆ"                                   # è®­ç»ƒå®Œæˆæ ‡è®°
    - "Epoch [300/300]"                          # ç‰¹å®šè½®æ¬¡æ ‡è®°
```

4. **GPUç›‘æ§é…ç½®**ï¼ˆå¯é€‰åŠŸèƒ½ï¼‰
```yaml
monitor:
  # GPUåŠŸè€—æ£€æŸ¥é…ç½®
  check_gpu_power_enabled: false                  # æ˜¯å¦å¯ç”¨GPUåŠŸè€—æ£€æŸ¥
  check_gpu_power_threshold: 50.0                 # åŠŸè€—é˜ˆå€¼(ç“¦ç‰¹)ï¼Œå½“GPUåŠŸè€—ä½äºæ­¤å€¼æ—¶å¯èƒ½è¡¨ç¤ºè®­ç»ƒå®Œæˆ
  check_gpu_power_gpu_ids: "all"                 # ç›‘æ§çš„GPU IDï¼Œå¯ä»¥æ˜¯ä»¥ä¸‹æ ¼å¼ï¼š
                                                 # - "all": ç›‘æ§æ‰€æœ‰GPU
                                                 # - å•ä¸ªæ•°å­—ï¼Œå¦‚ï¼š0
                                                 # - åˆ—è¡¨ï¼Œå¦‚ï¼š[0,1]
  check_gpu_power_consecutive_checks: 3           # è¿ç»­æ£€æµ‹æ¬¡æ•°ï¼Œè¿ç»­Næ¬¡ä½äºé˜ˆå€¼æ‰åˆ¤å®šä¸ºå®Œæˆ
                                                 # é¿å…ä¸´æ—¶çš„åŠŸè€—æ³¢åŠ¨å¯¼è‡´è¯¯åˆ¤
```

5. **Webhooké€šçŸ¥é…ç½®**
```yaml
webhook:
  enabled: true                                   # æ˜¯å¦å¯ç”¨webhooké€šçŸ¥
  url: "your_webhook_url"                        # webhook URLï¼Œæ”¯æŒå„ç§å¹³å°ï¼š
                                                # - é£ä¹¦: https://open.feishu.cn/open-apis/bot/v2/hook/xxx
                                                # - é’‰é’‰: https://oapi.dingtalk.com/robot/send?access_token=xxx
                                                # - Slack: https://hooks.slack.com/services/xxx
                                                # - Discord: https://discord.com/api/webhooks/xxx
  
  # æ¶ˆæ¯æ ·å¼é…ç½®
  title: "ğŸ‰ æ·±åº¦å­¦ä¹ è®­ç»ƒå®Œæˆé€šçŸ¥"                    # æ¶ˆæ¯æ ‡é¢˜
  color: "green"                                 # å¡ç‰‡é¢œè‰²ï¼Œæ”¯æŒï¼š
                                                # - green: ç»¿è‰²ï¼ˆæˆåŠŸï¼‰
                                                # - blue: è“è‰²ï¼ˆä¿¡æ¯ï¼‰
                                                # - red: çº¢è‰²ï¼ˆé”™è¯¯ï¼‰
                                                # - grey: ç°è‰²ï¼ˆé»˜è®¤ï¼‰
                                                # - turquoise: é’è‰²
  
  # æ¶ˆæ¯å†…å®¹é…ç½®ï¼ˆæ¯ä¸€é¡¹éƒ½å¯ä»¥è‡ªå®šä¹‰æ˜¯å¦æ˜¾ç¤ºå’Œæ˜¾ç¤ºçš„æ ‡é¢˜ï¼‰
  include_project_name: true                     # æ˜¯å¦æ˜¾ç¤ºé¡¹ç›®åç§°
  include_project_name_title: "è®­ç»ƒé¡¹ç›®"           # é¡¹ç›®åç§°çš„æ˜¾ç¤ºæ ‡é¢˜
  
  include_start_time: true                       # æ˜¯å¦æ˜¾ç¤ºå¼€å§‹æ—¶é—´
  include_start_time_title: "è®­ç»ƒå¼€å§‹"            # å¼€å§‹æ—¶é—´çš„æ˜¾ç¤ºæ ‡é¢˜
  
  include_end_time: true                         # æ˜¯å¦æ˜¾ç¤ºç»“æŸæ—¶é—´
  include_end_time_title: "è®­ç»ƒç»“æŸæ—¶é—´"           # ç»“æŸæ—¶é—´çš„æ˜¾ç¤ºæ ‡é¢˜
  
  include_method: true                           # æ˜¯å¦æ˜¾ç¤ºè§¦å‘æ–¹å¼
  include_method_title: "ç³»ç»Ÿåˆ¤æ–­ä¾æ®"             # è§¦å‘æ–¹å¼çš„æ˜¾ç¤ºæ ‡é¢˜
  
  include_duration: true                         # æ˜¯å¦æ˜¾ç¤ºæŒç»­æ—¶é—´
  include_duration_title: "æ€»è€—æ—¶"                # æŒç»­æ—¶é—´çš„æ˜¾ç¤ºæ ‡é¢˜
  
  include_hostname: true                         # æ˜¯å¦æ˜¾ç¤ºä¸»æœºå
  include_hostname_title: "ä¸»æœºå"                # ä¸»æœºåçš„æ˜¾ç¤ºæ ‡é¢˜
  
  include_gpu_info: true                         # æ˜¯å¦æ˜¾ç¤ºGPUä¿¡æ¯
  include_gpu_info_title: "GPUä¿¡æ¯"              # GPUä¿¡æ¯çš„æ˜¾ç¤ºæ ‡é¢˜

  footer: "æ­¤æ¶ˆæ¯ç”±TaskNyaå‘é€"                    # é¡µè„šä¿¡æ¯ï¼Œæ˜¾ç¤ºåœ¨é€šçŸ¥åº•éƒ¨
```

é…ç½®æ–‡ä»¶è¯´æ˜ï¼š
1. æ‰€æœ‰è·¯å¾„æ”¯æŒç›¸å¯¹è·¯å¾„å’Œç»å¯¹è·¯å¾„ï¼Œå»ºè®®ä½¿ç”¨ç›¸å¯¹è·¯å¾„
2. GPUç›‘æ§åŠŸèƒ½éœ€è¦NVIDIAæ˜¾å¡æ”¯æŒ
3. æ—¶é—´ç›¸å…³çš„é…ç½®å•ä½å‡ä¸ºç§’
4. Webhookæ”¯æŒæ‰€æœ‰æ ‡å‡†çš„Webhookæ¥å£ï¼Œå¯ä»¥æ ¹æ®å®é™…éœ€æ±‚è°ƒæ•´æ¶ˆæ¯æ ¼å¼
5. [é£ä¹¦webhookæœºå™¨äººä½¿ç”¨è¯´æ˜](https://open.feishu.cn/document/client-docs/bot-v3/add-custom-bot)

### ç›®å½•ç»“æ„

```
TaskNya/
â”œâ”€â”€ app/                      # Webåº”ç”¨ç›®å½•
â”‚   â”œâ”€â”€ app.py               # Flaskåº”ç”¨ä¸»æ–‡ä»¶
â”‚   â”œâ”€â”€ static/              # é™æ€æ–‡ä»¶
â”‚   â””â”€â”€ templates/           # æ¨¡æ¿æ–‡ä»¶
â”œâ”€â”€ configs/                 # é…ç½®æ–‡ä»¶ç›®å½•
â”‚   â””â”€â”€ default.yaml        # é»˜è®¤é…ç½®æ–‡ä»¶
â”œâ”€â”€ logs/                   # æ—¥å¿—ç›®å½•
â”‚   â”œâ”€â”€ monitor.log        # ç›‘æ§ç¨‹åºæ—¥å¿—
â”‚   â””â”€â”€ webui.log         # Webç•Œé¢æ—¥å¿—
â”œâ”€â”€ main.py                # ç›‘æ§ç¨‹åºä¸»æ–‡ä»¶
â”œâ”€â”€ webui.py              # Webç•Œé¢å¯åŠ¨ç¨‹åº
â”œâ”€â”€ start_webui.bat       # Windowså¿«æ·å¯åŠ¨è„šæœ¬
â””â”€â”€ requirements.txt      # ä¾èµ–æ–‡ä»¶
```

---

## æ³¨æ„äº‹é¡¹

1. **GPUç›‘æ§åŠŸèƒ½**
   - ä»…åœ¨æœ‰NVIDIAæ˜¾å¡çš„ç¯å¢ƒä¸‹å¯ç”¨
   - éœ€è¦å®‰è£… `nvidia-ml-py3` åŒ…
   - æ— NVIDIAæ˜¾å¡æ—¶æ­¤åŠŸèƒ½ä¼šè‡ªåŠ¨ç¦ç”¨

2. **Webç•Œé¢ä½¿ç”¨**
   - é…ç½®ä¿®æ”¹åéœ€ç‚¹å‡»"åº”ç”¨å½“å‰é…ç½®"æ‰ä¼šç”Ÿæ•ˆ
   - å¯ä»¥ä¿å­˜å¤šä¸ªé…ç½®æ–¹æ¡ˆï¼Œæ–¹ä¾¿åˆ‡æ¢
   - æ—¥å¿—é¢æ¿å®æ—¶æ˜¾ç¤ºç›‘æ§çŠ¶æ€

3. **æ–‡ä»¶è·¯å¾„**
   - é…ç½®æ–‡ä»¶ä¸­çš„è·¯å¾„éƒ½ç›¸å¯¹äºé¡¹ç›®æ ¹ç›®å½•
   - å»ºè®®ä½¿ç”¨ç›¸å¯¹è·¯å¾„ï¼Œé™¤éæœ‰ç‰¹æ®Šéœ€æ±‚

4. **ç›‘æ§é€»è¾‘**
   - å¤šä¸ªç›‘æ§æ¡ä»¶æ˜¯"æˆ–"çš„å…³ç³»
   - ä»»ä¸€æ¡ä»¶æ»¡è¶³å³è§¦å‘é€šçŸ¥
   - GPUåŠŸè€—æ£€æµ‹éœ€è¦è¿ç»­å¤šæ¬¡ä½äºé˜ˆå€¼

5. **æ—¥å¿—æ–‡ä»¶**
   - `monitor.log`: è®°å½•ç›‘æ§ç¨‹åºçš„è¿è¡Œæ—¥å¿—
   - `webui.log`: è®°å½•Webç•Œé¢çš„æ“ä½œæ—¥å¿—
   - æ—¥å¿—æ–‡ä»¶ä¼šè‡ªåŠ¨åˆ›å»ºåœ¨ `logs` ç›®å½•ä¸‹

6. **é…ç½®æ–‡ä»¶**
   - é»˜è®¤é…ç½®ä¿å­˜åœ¨ `configs/default.yaml`
   - è‡ªå®šä¹‰é…ç½®ä¿å­˜åœ¨ `configs` ç›®å½•ä¸‹
   - æ”¯æŒé€šè¿‡Webç•Œé¢ç®¡ç†é…ç½®

---

## å¼€å‘ & è´¡çŒ®  

æ¬¢è¿è´¡çŒ®ä»£ç ï¼è¯·å…ˆ fork é¡¹ç›®ï¼Œç„¶åæäº¤ Pull Request ğŸ˜ƒ  
å¦‚æœä½ å–œæ¬¢è¯¥é¡¹ç›®çš„è¯æ¬¢è¿æ·»åŠ starï¼ â­

---

## è®¸å¯è¯  

MIT License - ä½ å¯ä»¥è‡ªç”±ä½¿ç”¨å’Œä¿®æ”¹æœ¬é¡¹ç›®ã€‚  

---
